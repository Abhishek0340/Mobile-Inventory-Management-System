import{r as n,a as M,j as e,L as S}from"./index-DeDfjuL6.js";import{A as R,M as T,a as P,b as A,c as D,d as O,e as E}from"./AdminLayout-DT2GhcVO.js";import{f as x,p as k}from"./parseISO-CF8nPaSG.js";const z=()=>{const[a,h]=n.useState({totalRevenue:0,monthlyRevenue:0,totalOrders:0,totalCustomers:0,totalProducts:"10+"}),[m,u]=n.useState([]),[r,g]=n.useState(5e4),[C,p]=n.useState([]);return n.useEffect(()=>{M.get("https://mims-backend.vercel.app/bills").then(l=>{const o=l.data,y=x(new Date,"yyyy-MM"),i=o.filter(s=>{const t=k(s.billDate);return x(t,"yyyy-MM")===y}),f=o.reduce((s,t)=>s+t.total,0),c=i.reduce((s,t)=>s+t.total,0),v=new Set(i.map(s=>{var t;return(t=s.customer)==null?void 0:t.email})).size,j=i.length,b=Math.ceil(c/5e4)*5e4||5e4;g(b),h({totalRevenue:f,monthlyRevenue:c,totalOrders:j,totalCustomers:v,totalProducts:"10+"});const d={};i.forEach(s=>{s.order.forEach(t=>{d[t.productName]?d[t.productName]+=t.quantity:d[t.productName]=t.quantity})});const N=Object.entries(d).map(([s,t])=>({name:s,sold:t})).sort((s,t)=>t.sold-s.sold).slice(0,5);u(N);const w=Array.from({length:Math.floor(c/5e4)},(s,t)=>`â‚¹${(t+1)*5e4} Achieved`);p(w)}).catch(l=>console.error("Error fetching data:",l))},[]),e.jsxs(R,{children:[e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:e.jsxs("nav",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-gray-500",children:e.jsx(S,{to:"/home",children:e.jsx(T,{fontSize:20})})}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("span",{className:"font-semibold text-gray-800",children:"Dashboard"})]})}),e.jsxs("div",{className:"p-4 md:p-8 bg-gray-50 min-h-screen",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[{icon:e.jsx("p",{className:"text-4xl text-green-800",children:"â‚¹"}),title:"Total Revenue",value:`${a.totalRevenue}`},{icon:e.jsx("p",{className:"text-4xl text-green-800",children:"â‚¹"}),title:"Monthly Revenue",value:`${a.monthlyRevenue}`},{icon:e.jsx(P,{className:"text-4xl text-orange-500"}),title:"Total Orders (This Month)",value:a.totalOrders},{icon:e.jsx(A,{className:"text-4xl text-purple-600"}),title:"Total Customers (This Month)",value:a.totalCustomers},{icon:e.jsx(D,{className:"text-4xl text-red-600"}),title:"Total Products",value:a.totalProducts}].map((l,o)=>e.jsxs("div",{className:"flex items-center gap-4 p-5 bg-white rounded-2xl shadow hover:shadow-lg transition duration-300",children:[l.icon,e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500",children:l.title}),e.jsx("p",{className:"text-xl font-bold text-gray-800",children:l.value})]})]},o))}),e.jsxs("div",{className:"p-6 bg-white rounded-3xl shadow  transition-all duration-300 mb-10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[e.jsx(O,{className:"text-3xl text-indigo-600"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"ðŸŽ¯ Monthly Sales Target Progress"})]}),e.jsx("div",{className:"relative w-full h-6 bg-gradient-to-r from-gray-200 to-gray-300 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:"absolute top-0 left-0 h-full bg-gradient-to-r from-indigo-500 via-blue-500 to-sky-500 rounded-full shadow-md transition-all duration-700 ease-in-out",style:{width:`${Math.min(a.monthlyRevenue/r*100,100)}%`}})}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-between text-sm gap-2",children:[e.jsxs("p",{className:"text-gray-700 font-semibold",children:[e.jsxs("span",{className:"text-base font-bold text-indigo-600",children:["â‚¹",a.monthlyRevenue.toLocaleString()]})," ","of â‚¹",r.toLocaleString()]}),e.jsx("div",{className:"text-yellow-700 font-semibold text-left text-sm",children:`â­ ${Math.floor(a.monthlyRevenue/5e4)} Stars`}),a.monthlyRevenue>=r?e.jsx("span",{className:"inline-block px-4 py-1 text-xs font-bold bg-green-100 text-green-700 rounded-full shadow-sm",children:"âœ… Goal Achieved!"}):e.jsxs("span",{className:"inline-block px-4 py-1 text-xs font-medium bg-yellow-100 text-yellow-700 rounded-full shadow-sm",children:[Math.floor(a.monthlyRevenue/r*100),"% Achieved"]})]})]}),e.jsxs("div",{className:"p-6 bg-white rounded-2xl shadow hover:shadow-lg transition duration-300",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(E,{className:"text-2xl text-yellow-500"}),e.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Top 5 Selling Products (This Month)"})]}),m.length>0?e.jsx("ul",{className:"divide-y divide-gray-200",children:m.map((l,o)=>e.jsxs("li",{className:"flex justify-between py-3 text-gray-700",children:[e.jsx("span",{children:l.name}),e.jsx("span",{className:"font-bold text-blue-600",children:l.sold})]},o))}):e.jsx("p",{className:"text-sm text-gray-500",children:"No sales data available for this month."})]})]})]})};export{z as default};
